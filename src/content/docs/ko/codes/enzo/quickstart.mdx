---
title: Enzo Quickstart
description: Enzo 공식 문서 기준 소스 빌드 및 첫 테스트 실행 가이드.
sidebar:
  label: Quickstart
  order: 2
---

import { TabItem, Tabs } from '@astrojs/starlight/components';

이 챕터에서는 Enzo를 소스에서 빌드하고 공식 테스트 문제를 한 번 실행해 환경이 올바르게 갖춰졌는지 확인합니다.

## 목표 체크리스트

- OS에 맞게 Conda(Miniforge)를 설치합니다.
- `enzo-lab` 가상환경을 생성하고 활성화합니다.
- `enzo.exe`를 정상 빌드합니다.
- 공식 테스트 문제를 한 번 실행합니다.
- 빌드/실행 시 MPI/HDF5 불일치 오류가 없는지 확인합니다.

## Installation

### 1) 운영체제별 Miniforge 설치

<Tabs syncKey="enzo-install-os-ko-v1">
  <TabItem label="Windows (WSL2)">
    #### 0) WSL2 + Ubuntu 설치/검증

    PowerShell/Windows Terminal을 **관리자 권한**으로 실행 후:

    ```powershell
    wsl --install -d Ubuntu
    wsl --set-default-version 2
    wsl -l -v
    ```

    `wsl --install`이 도움말만 출력되면:

    ```powershell
    wsl --list --online
    wsl --install -d Ubuntu
    ```

    설치가 `0.0%`에서 멈추면:

    ```powershell
    wsl --install --web-download -d Ubuntu
    ```

    재부팅이 필요하면 재부팅 후 Ubuntu를 실행해 Linux 사용자 계정을 생성하세요.

    #### 1) Miniforge 설치(Ubuntu 터미널)

    ```bash
    sudo apt update
    sudo apt install -y curl bzip2

    curl -L -o ~/miniforge.sh \
      "https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-Linux-$(uname -m).sh"
    bash ~/miniforge.sh -b -p "$HOME/miniforge3"

    source "$HOME/miniforge3/etc/profile.d/conda.sh"
    conda init bash
    ```
  </TabItem>

  <TabItem label="macOS">
    #### 0) Miniforge 설치

    ```bash
    xcode-select --install

    curl -L -o ~/miniforge.sh \
      https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-MacOSX-$(uname -m).sh
    bash ~/miniforge.sh -b -p "$HOME/miniforge3"

    source "$HOME/miniforge3/etc/profile.d/conda.sh"
    conda init zsh
    ```
  </TabItem>

  <TabItem label="Linux (Ubuntu)">
    ```bash
    sudo apt update
    sudo apt install -y curl bzip2

    curl -L -o ~/miniforge.sh \
      "https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-Linux-$(uname -m).sh"
    bash ~/miniforge.sh -b -p "$HOME/miniforge3"

    source "$HOME/miniforge3/etc/profile.d/conda.sh"
    conda init bash
    ```
  </TabItem>
</Tabs>

### 2) `enzo-lab` 가상환경 생성

```bash
conda create -n enzo-lab -c conda-forge \
  python=3.11 compilers make git \
  openmpi mpi4py hdf5 zlib -y

conda activate enzo-lab
which python
which gfortran
which mpicc
echo "$CONDA_PREFIX"
```

Enzo의 핵심 요구사항은 POSIX 환경 + C/C++ + Fortran + HDF5이며, 병렬 실행에는 MPI가 필요합니다.
환경에 따라 HDF5 신버전 호환을 위해 `-DH5_USE_16_API` 플래그가 필요할 수 있습니다.

### 3) 소스 코드 받기 및 초기 설정

```bash
git clone https://github.com/enzo-project/enzo-dev.git
cd enzo-dev
./configure
```

### 4) 머신 설정 선택 후 빌드

```bash
cd src/enzo
ls Make.mach.*
make machine-<your-machine>
make show-config
make
```

빌드가 완료되면 `src/enzo/enzo.exe`가 생성됩니다.

### 5) 테스트 문제 실행

```bash
cp enzo.exe ../../run/Hydro/Hydro-3D/CollapseTestNonCosmological
cd ../../run/Hydro/Hydro-3D/CollapseTestNonCosmological
./enzo.exe -d CollapseTestNonCosmological.enzo
```

환경에 따라 `mpirun`/`mpiexec` 또는 스케줄러 런처(`srun`)로 실행해야 할 수 있습니다.

### 6) 빠른 검증

- 출력 디렉터리/파일이 정상 생성됩니다.
- `make show-config` 결과가 의도한 정밀도/옵션과 일치합니다.
- HDF5/MPI 링크 오류가 남아 있지 않습니다.

## 공식 빌드 참조

- [Enzo User Guide: Obtaining and Building Enzo](https://enzo.readthedocs.io/en/latest/user_guide/building_enzo.html)
- [Enzo User Guide: Quickstart Guide to Enzo](https://enzo.readthedocs.io/en/latest/user_guide/bootcamp.html)
